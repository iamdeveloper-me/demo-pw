<div id="wrapper" class="toggled">
    <div id="sidebar-wrapper" >
        <app-vendorsidebar></app-vendorsidebar>
    </div>
    <div id="page-content-wrapper">
        <app-navemenu></app-navemenu>    
        <router-outlet></router-outlet> 
        <div class="container-fluid mobilefixedcontainer">
        <div class="col-sm-12 card">  
        <div class="createmyalbum">
            <div class=" text-center">
                <h2>MY EVENTS {{eventArray}}</h2>       
                <span>Increase your brand awareness through event hosting. It's free! </span>
            </div>  

              <ul class="tabbingdesign">
                                <li class="card-title selected Suppliertab">Past Event</li>
                                <li class="card-title Registertab">Upcoming Event</li>
                            </ul> 
                            </div> 
        
        <div class="clearfix"></div>
        <div class="col-md-12">
                    <div class="">
                        <div class="col-md-12 nopadd">
                            
                                <div class="serchbox">
                                    <input type="text" placeholder="Search...." name="">
                                    <button class="btn btn-small btn-link" (click)="open(adduser)"> 
                                    
                                    
                                        <i class="material-icons"> add </i> <span> <strong> Create New Event {{fileIdfield.filesId}}</strong> </span></button>
                                    
                                
                                    
                                </div>
                                  
                                <form (ngSubmit)="addFile(info)" #info="ngForm" class="    padding-left: 84%">
                                        <input #fileInput 
                                            type="file"
                                            [(ngModel)]="gallery.files" 
                                            name="image" 
                                            id="image"/>                     
                                      
                                        <button type="submit" class="btn btn-small btn-link" >
                                                <i class="material-icons"> add </i>
                                            upload event image </button>   
                                        <span class="focus-border"></span>
                                </form>   
                                            
                                  
                             
                        </div>
                        <div class="clearfix"></div>
                        <section id="filter2"  >
                           
                                <div class="col-sm-12 nopadd"   *ngFor="let data of eventArray;let i=index" >
                                    <div class="card martop0px"  *ngFor="let name of data.eventsDates"   >
                                        <div class="card-body borall" *ngIf="name.eventDate < test" >
                                            <div class="card-block">
                                           
                                              
                                                <div class="col-md-4 col-12 pad_0px " >
                                                       <img  src="{{data.files.path}} " class="img-responsive"> 
                                                  
                                                    <!-- <p>{{data.files.path}}</p> -->
                                                </div>
                                           
                                              
                                                <div class="col-md-8 col-12 textboxevent">
                                                    <table>
                                                        <tr>
                                                            <td>
                                                                <div class="col-md-12 col-12 margin_p mob_font_12px mob_font_14px">
                                                                <div class="club_heading">
                                                                        <!-- <form (ngSubmit)="addFile(info)" #info="ngForm" >
                                                                                <input #fileInput 
                                                                                    type="file"
                                                                                    [(ngModel)]="gallery.files" 
                                                                                    name="image" 
                                                                                    id="image"/>
                        
                                                                    
                                                                                <label>Image</label>
                                                                                <button type="submit" class="btn btn-secondary btn-raise saveall" (click) = "addFile(info)">upload</button>   
                                                                                <span class="focus-border"></span>
                                                                         </form> -->
                                                                <h5> {{data.eventTitle}} </h5>
                                                                </div>
                                                                <p>
                                                                <strong> Capacity:{{data.capacity}}</strong>
                                                                </p>
                                                                <p>
                                                                <strong> Venue:{{data.venueName}}</strong>
                                                                </p>  
                                                                <p> 
                                                                <strong>Event Town:{{data.location}}</strong> 
                                                                </p>  
                                                                <p> 
                                                                <strong>Entry Fee:{{data.entryFee}}</strong> 
                                                                </p> 
                                                                <p class="locat_tag"> 
                                                                <i class="material-icons"> location_on</i>  {{data.location}}      
                                                                </p> 
                                                                <div class="col-md-12 col-12 margin_p mob_font_12px mob_font_14px" *ngFor="let name of data.eventsDates">
                                                                <p>
                                                                    <i class="material-icons">access_time </i> <strong> Start Time {{name.startTime  | date :  "shortTime" }}</strong>  
                                                                </p>
                                                                
                                                                </div>
                                                                <div class="col-md-12 col-12 margin_p mob_font_12px mob_font_14px" *ngFor="let name of data.eventsDates">
                                                                <p>
                                                                    <i class="material-icons">access_time </i><strong>End Time  {{name.endTime | date :  "shortTime" }} </strong>
                                                                </p>
                                                                
                                                                </div>
                                                                <div class="col-md-12 col-12 mar_top_10px" ></div>
                                                                <div class="col-md-12 col-12 margin_p mob_font_12px mob_font_14px" *ngFor="let name of data.eventsDates"   >
                                                                            
                                                                <p>
                                                                    <i class="material-icons">date_range </i><strong > Recurring  Date {{name.eventDate | date}}  </strong>
                                                                </p>
                                                                

                                                              
                                                                </div>
                                                                </div>
                                                            </td>
                                                            <td class="text-center">s
                                                                <button class="btn btn-success whitetext btn-rounded"(click)= "editevent(data)"  data-target="#Description" data-toggle="modal" id="description-function">Edit{{data.eventId}}</button>
                                                                
                                                                 <button class="btn btn-warning whitetext btn-rounded" (click)= "deletevent(data,i)">Delete {{data.eventId}} </button>
                                                            </td>
                                                        </tr>
                                                    </table>
                                                </div>  
                                                <div class="col-md-12 pad_0px">
                                                    <p>
                                                        <strong>Description</strong><br/>
                                                        {{data.eventDescription}}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                        </section>
                        <section id="action2">
                                <div class="col-sm-12 nopadd"   *ngFor="let data of eventArray;let i=index " >
                                        <div class="card martop0px"  *ngFor="let name of data.eventsDates"  >
                                            <div class="card-body borall"  *ngIf="name.eventDate > test">
                                                <div class="card-block">
                                                    <div class="col-md-4 col-12 pad_0px">
                                                        
                                                        <img  src="{{data.files.path}}" class="img-responsive">
                                                    </div>
                                                    <div class="col-md-8 col-12 textboxevent">
                                                        <table>
                                                            <tr>
                                                                <td>
                                                                    <div class="col-md-12 col-12 margin_p mob_font_12px mob_font_14px">
                                                                    <div class="club_heading">
                                                                    <h5> {{data.eventTitle}}
                                                                       
                                                                    </h5>
                                                                    </div>
                                                                    <p>
                                                                    <strong> Capacity:{{data.capacity}}</strong>
                                                                    </p>
                                                                    <p>
                                                                    <strong> Venue:{{data.venueName}}</strong>
                                                                    </p>  
                                                                    <p> 
                                                                    <strong>Event Town:{{data.location}}</strong> 
                                                                    </p>  
                                                                    <p> 
                                                                    <strong>Entry Fee:{{data.entryFee}}</strong> 
                                                                    </p> 
                                                                    <p class="locat_tag"> 
                                                                    <i class="material-icons"> location_on</i> {{data.location}}  
                                                                    </p> 
                                                                    <div class="col-md-12 col-12 margin_p mob_font_12px mob_font_14px"  *ngFor="let name of data.eventsDates">
                                                                    <p>
                                                                        <i class="material-icons">access_time </i> <strong> Start Time {{name.startTime | date :  "shortTime" }}</strong>  
                                                                    </p>
                                                                    
                                                                    </div>
                                                                    <div class="col-md-12 col-12 margin_p mob_font_12px mob_font_14px"  *ngFor="let name of data.eventsDates">
                                                                    <p>
                                                                        <i class="material-icons">access_time </i><strong>End Time  {{name.endTime | date :  "shortTime" }} </strong>
                                                                    </p>
                                                                    
                                                                    </div>
                                                                    <div class="col-md-12 col-12 mar_top_10px" ></div>
                                                                    <div class="col-md-12 col-12 margin_p mob_font_12px mob_font_14px" *ngFor="let name of data.eventsDates"   >
                                                                                
                                                                    <p>
                                                                        <i class="material-icons">date_range </i><strong > Recurring  Date {{name.eventDate | date}}  </strong>
                                                                    </p>
                                                                    
    
                                                                  
                                                                    </div>
                                                                    </div>
                                                                </td>
                                                                <td class="text-center">
                                                                    <button class="btn btn-success whitetext btn-rounded"(click)= "editevent(data)"  data-target="#Description" data-toggle="modal" id="description-function">Edit{{data.eventId}}</button>
                                                                     <button class="btn btn-warning whitetext btn-rounded" (click)= "deletevent(data)">Delete {{data.eventId}} </button>
                                                                </td>
                                                            </tr>
                                                        </table>
                                                    </div>  
                                                    <div class="col-md-12 pad_0px">
                                                        <p>
                                                            <strong>Description</strong><br/>
                                                            {{data.eventDescription}}
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                        </section>
                    </div>    
                </div>
        </div> 
    </div>	 
</div> 
</div>  

<ng-template #adduser let-c="close" let-d="dismiss">
 <form (ngSubmit)="event(list)" #list="ngForm" > 
        <div class="modal-header text-center">
            <h4 class="modal-title"><b>Create Event  {{fileIdfield.filesId}}</b></h4>
            <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body"> 
            <div class="form-group">
                <div class="input-effect form-group md-form ">  
                    <input class="effect-16 validate" 
                    required="required" 
                    [(ngModel)]="list.eventTitle"  
                    id="Title" 
                    name="Title" >
                    <label>Title</label>
                    <span class="focus-border"></span>
                </div>
            </div>
          
                    <!-- <input  type="file" accept="image/*" class="effect-16 validate"  required="required" [(ngModel)]="list.filesId"  
                    id="Image" 
                    name="Image"> -->
                    <input type="hidden"
                    name="filesId" 
                    id="filesId"
                    [value]="fileIdfield.filesId"
                    [(ngModel)]="fileIdfield.filesId">     
                    
                          
            <div class="form-group date_picker">
                <label  style="width:100%;">event date:</label> <br>
                <input type="date"
                    name="eventdate" 
                    id="eventdate"
                    [(ngModel)]="list.eventDate"  style="width:100%;">
            </div>
            <div class="form-group date_picker col-sm-6" style="padding-left: 0px;">
                <label style="width:100%;">
                    <a href=""> start time </a>
                </label><br>
                <input type="time" 
                name="starttime"
                id="starttime"
                [(ngModel)]="list.startTime" style="width:100%;">
            </div>
            <div class="form-group date_picker  col-sm-6" style="padding-right:0px;">
                    <label style="width:100%;">
                        <a href="">end time </a>
                    </label><br>
                    <input type="time" 
                    name="endtime"
                    id="endtime"
                    [(ngModel)]="list.endTime" style="width:100%;">
            </div>
            <div class="clearfix"></div>
              <div class="form-group">
                    <div class="input-effect form-group md-form ">
                    <input  type="text" class="effect-16 validate"  required="required"  [(ngModel)]="list.venueName" name="venueName" id="venueName">
                     
                        <label>VenueName</label>
                        <span class="focus-border"></span>
                    </div>
            </div> 
            <div class="form-group">
                <div class="input-effect form-group md-form ">  
                    <select  class="effect-16 validate"  name="Eventtown" id="Eventtown">
                        <option>District 1</option>
                         <option>District 2</option>
                    </select>
                    
                    <span class="focus-border"></span>
                </div>
            </div>
            <div class="clearfix"></div>

            <div class="form-group">
                <div class="input-effect form-group md-form ">  
                    <input  type="text" class="effect-16 validate"  required="required"  [(ngModel)]="list.location" name="Location" id="Location">
                    <label>Location</label>
                    <span class="focus-border"></span>
                </div>
            </div>
            <div class="form-group">
                <div class="input-effect form-group md-form "> 
                    <input  type="text" class="effect-16 validate"  required="required"  [(ngModel)]="list.capacity" name="Capacity" id="Capacity">
                    <label>Capacity</label>
                    <span class="focus-border"></span>
                </div>
            </div>
            <div class="form-group">
                <div class="input-effect form-group md-form "> 
                    <input  type="text" class="effect-16 validate"  required="required"  [(ngModel)]="list.eventDescription" name="eventDescription" id="eventDescription"> 
                  
                    <label>Description</label>
                    <span class="focus-border"></span>
                </div>
            </div>   
            <div class="form-group">
                    <div class="input-effect form-group md-form ">  
                        <input  type="text" class="effect-16 validate"  required="required"  [(ngModel)]="list.entry" name="entry" id="entry">
                      
                        <label>Entry</label>
                        <span class="focus-border"></span>
                    </div>
            </div> 
           
            <div class="form-group">
                    <div class="input-effect form-group md-form ">
                    <input  type="text" class="effect-16 validate"  required="required"  [(ngModel)]="list.entryFee" name="entryFee" id="entryFee">
                      
                        <label>entryFee</label>
                        <span class="focus-border"></span>
                    </div>
            </div> 
     
        </div>
        <div class="modal-footer">
            <button type="submit" class="btn btn-secondary btn-raise "  >Save</button>   
            
            <button type="button" class="btn btn-secondary btn-raised" (click)="c('Close click')">Cancel</button>
        </div> 
   </form>     
</ng-template>

<form (ngSubmit)="editsave(data)" #data="ngForm" >
    <div class="modal fade" id="Description" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
            <div class="modal-header text-center">
                <h4 class="modal-title">Edit Business  {{eventdate | json}}</h4>
            </div>
            <div class="modal-body">     
                 
                            <div class="modal-header text-center">
                                <h4 class="modal-title"><b>edit Event  {{modelfield }} </b></h4>
                                <button type="button" class="close btn_mar_padd" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                                </button>
                            </div>
                            <div class="modal-body"> 
                                
                                        <div class="form-group">
                                                        <div class="input-effect form-group md-form ">  
                                                            <input class="effect-16 validate whitebg" 
                                                            required="required" 
                                                            [(ngModel)]="modelfield.eventTitle"  
                                                            id="Title" 
                                                            name="Title" >
                                                            <input class="effect-16 validate" 
                                                             type="hidden"
                                                            [(ngModel)]="modelfield.eventId"  
                                                            id="id" 
                                                            name="id" >
                                                            <label>Title{{modelfield.title}}</label>
                                                            <span class="focus-border"></span>
                                                        </div>
                                                    </div>
                                                    <!-- <div class="form-group">
                                                            <form (ngSubmit)="addFile(info)" #info="ngForm" class="    padding-left: 84%">
                                                                    <input #fileInput 
                                                                        type="file"
                                                                        [(ngModel)]="gallery.files" 
                                                                        name="image" 
                                                                        id="image"/>                     
                                                                  
                                                                    <button type="submit" class="btn btn-small btn-link" >
                                                                            <i class="material-icons"> add </i>
                                                                        upload event image </button>   
                                                                    <span class="focus-border"></span>
                                                            </form>   
                                                    </div> -->
                                                    
                                        <div class="form-group date_picker">
                                            <label>event date: {{modelfield.eventDate}}</label> <br>
                                            <input type="date"
                                            name="eventdate" 
                                            id="eventdate"
                                            [(ngModel)]="eventdate">
                                           
                                        </div>
                                        <div class="form-group date_picker">
                                            <label>
                                                <a href=""> start time  </a>
                                            </label><br>
                                        <input type="time" 
                                        name="starttime"
                                        id="starttime"
                                        [(ngModel)]="startime">
                                        </div>
                                        <div class="form-group date_picker">
                                                <label>
                                                    <a href="">end time</a>
                                                </label><br>
                                            <input type="time" 
                                            name="endtime"
                                            id="endtime"
                                            
                                            [(ngModel)]="endtime">
                                            </div>
                                        <div class="form-group">
                                            <div class="input-effect form-group md-form ">  
                                                <input  type="text" class="effect-16 validate"  required="required"  [(ngModel)]="modelfield.location" name="Location" id="Location">
                                                <label>Location}</label>
                                                <span class="focus-border"></span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-effect form-group md-form ">  
                                                <input  type="text" class="effect-16 validate"  required="required"  [(ngModel)]="modelfield.capacity" name="Capacity" id="Capacity">
                                                <label>Capacity</label>
                                                <span class="focus-border"></span>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="input-effect form-group md-form "> 
                                                <input  type="text" class="effect-16 validate"  required="required"  [(ngModel)]="modelfield.eventDescription" name="eventDescription" id="eventDescription"> 
                                                <label>Description</label>
                                                <span class="focus-border"></span>
                                            </div>
                                        </div>   
                                        <div class="form-group">
                                                <div class="input-effect form-group md-form ">  
                                                    <input  type="text" class="effect-16 validate"  required="required"  [(ngModel)]="modelfield.entry" name="entry" id="entry">
                                                  
                                                    <label>Entry</label>
                                                    <span class="focus-border"></span>
                                                </div>
                                            </div> 
                                            <div class="form-group">
                                                <div class="input-effect form-group md-form ">  
                                                    <input  type="text" class="effect-16 validate"  required="required"  [(ngModel)]="modelfield.entryFee" name="entryFee" id="entryFee">
                                                 
                                                    <label>entryFee</label>
                                                    <span class="focus-border"></span>
                                                </div>
                                            </div> 
                                            <div class="form-group">
                                                    <div class="input-effect form-group md-form ">
                                                    <input  type="text" class="effect-16 validate"  required="required"  [(ngModel)]="modelfield.venueName" name="venueName" id="venueName">
                                                      
                                                        <label>VenueName</label>
                                                        <span class="focus-border"></span>
                                                    </div>
                                                </div>  
                                            </div>
                                            <div class="modal-footer">
                                                <button type="submit" class="btn btn-secondary btn-raise saveall" >Save</button>   
                                               
                                                <button type="button" class="btn btn-secondary btn-raised" data-dismiss="modal">Cancel</button>
                                            </div>
                        
            </div>     
            </div>
        </div>
    </div>
</form>   
